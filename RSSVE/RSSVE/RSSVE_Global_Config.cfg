//  ==================================================
//  Real Solar System patches.

//  * Change the apparent size of the Sun.
//  * Change the flare and sunlight color of the Sun
//    to be clear white (6000 K).
//  * Change the ambient color of the Earth's atmosphere.
//  * Change the sun light color of the Earth's atmosphere.
//  * Add custom PQS terrain textures (until EVE Terrain
//    Manager is fixed).
//  * Remove the RSS Kopernicus "Oblate" feature since
//    it breaks the EVE and Scatterer effects.
//  ==================================================

@Kopernicus:FOR[RSSVE]:NEEDS[RealSolarSystem]
{
    @Body[Sun]
    {
        @ScaledVersion
        {
            %Light
            {
                %sunAU = 149597870700
                %sunlightColor = 1.0, 1.0, 1.0, 1.0
                %scaledSunlightColor = 1.0, 1.0, 1.0, 1.0
                %sunLensFlareColor = 0.0, 0.0, 0.0, 0.0
                %ambientLightColor = 0.1, 0.1, 0.1, 1.0
            }
        }

        %Material
        {
            %rimColor = 1.0, 1.0, 1.0, 1.0
        }
    }

    @Body[Kerbin]
    {
        @Atmosphere
        {
            @ambientColor = 0.07882, 0.08862, 0.1, 1.0
            @lightColor = 1.0, 1.0, 1.0, 1.0

            @AtmosphereFromGround
            {
                %innerRadius = 6357290
                %outerRadius = 6496000
                %waveLength = 0.7882, 0.8862, 1.0, 1.0
            }
        }

        @PQS
        {
            %minLevel = 2
            %maxLevel = 14
            %minDetailDistance = 4
            %maxQuadLenghtsPerFrame = 0.001

            @Material
            {
                %groundTexStart = 0
                %groundTexEnd = 10000

                %steepTex = RSSVE/Terrain/Textures/EarthRock
                %steepTexScale = 1.0, 1.0
                %steepTexOffset = 0.0, 0.0
                %steepNearTiling = 50
                %steepTiling = 25

                %lowTex = RSSVE/Terrain/Textures/EarthSurface
                %lowTexScale = 1.0, 1.0
                %lowTexOffset = 0.0, 0.0
                %lowNearTiling = 5
                %lowMultiFactor = 50
                %lowBumpNearTiling = 50
                %lowBumpFarTiling = 25

                %midTex = RSSVE/Terrain/Textures/EarthSurface
                %midTexScale = 1.0, 1.0
                %midTexOffset = 0.0, 0.0
                %midNearTiling = 5
                %midMultiFactor = 50
                %midBumpNearTiling = 50
                %midBumpFarTiling = 25

                %highTex = RSSVE/Terrain/Textures/EarthSurface
                %highTexScale = 1.0, 1.0
                %highTexOffset = 0.0, 0.0
                %highNearTiling = 5
                %highMultiFactor = 50
                %highBumpNearTiling = 50
                %highBumpFarTiling = 25
            }
        }
    }

    !Body[OblateJupiter]{}

    @Body[Jupiter]
    {
        @cacheFile = RealSolarSystem/RSSKopernicus/Cache/Jupiter.bin

        !Debug{}

        @Atmosphere
        {
            @AtmosphereFromGround
            {
                !transformScale = NULL
            }
        }

        @Properties
        {
            @radius /= 1.02261446696514
        }

        !PQS{}

        @Rings
        {
            @Ring,*
            {
                @innerRadius *= 1.02261446696514
                @outerRadius *= 1.02261446696514
            }
        }
    }

    !Body[OblateSaturn]{}

    @Body[Saturn]
    {
        @cacheFile = RealSolarSystem/RSSKopernicus/Cache/Saturn.bin

        @Atmosphere
        {
            %equator = #$../Properties/radius$
            @equator *= 0.948496056947449
            @equator *= 0.108601280258995
            @maxAltitude -= #$equator$

            @pressureCurve
            {
                @key,*[0, ] -= #$../equator$
            }

            @temperatureCurve
            {
                @key,*[0, ] -= #$../equator$
            }

            @temperatureSunMultCurve
            {
                @key,*[0, ] -= #$../equator$
            }
        }

        @Atmosphere
        {
            !equator = NULL
        }

        !Debug{}

        @Properties
        {
            @radius /= 0.948496056947449
        }

        @Rings
        {
            @Ring,*
            {
                @innerRadius *= 0.948496056947449
                @outerRadius *= 0.948496056947449
            }
        }
    }
}
